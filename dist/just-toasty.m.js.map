{"version":3,"file":"just-toasty.m.js","sources":["../src/index.js"],"sourcesContent":["const WORDS_PER_SECOND = 1.6\nconst ONE_SECOND = 1000\n\nfunction css(elem, rules = {}) {\n  Object.keys(rules).forEach(key => {\n    elem.style[key] = rules[key]\n  })\n}\n\n// https://stackoverflow.com/a/17980070/7027045\nfunction stripHTML(html = '') {\n   var tmp = document.implementation.createHTMLDocument(\"New\").body;\n   tmp.innerHTML = html;\n   return tmp.textContent || tmp.innerText || \"\";\n}\n\nfunction getDurationBasedOnWords(content) {\n  const words = stripHTML(content).split(' ')\n  return words.length * ONE_SECOND / WORDS_PER_SECOND\n}\n\nfunction toast(\n  content = '',\n  opts = {}\n) {\n  const {\n    className = '',\n    duration = getDurationBasedOnWords(content),\n    target = 'body',\n    offset = 15,\n    styles = {},\n    selector = 'just-toasty',\n    role = 'alert',\n    type = 'polite',\n    cb = () => { }\n  } = typeof opts === 'number' ? { duration: opts } : typeof opts === 'function' ? { cb: opts} : opts\n\n  const [vert, hor] = ['top', 'right']\n  const targetElem = document.querySelector(target)\n  const elem = document.createElement('div')\n\n  elem.setAttribute('role', role)\n  elem.setAttribute('aria-live', type)\n  elem.setAttribute('aria-atomic', \"true\")\n\n  elem.classList.add(selector)\n  className && elem.classList.add(className)\n  elem.innerHTML = content\n\n  css(\n    elem,\n    Object.assign(\n      {\n        [hor]: '15px',\n        opacity: 1,\n        padding: '1em 1.5em',\n        zIndex: 9999,\n        color: '#fff',\n        background: 'rgba(0,0,10,0.8)',\n        display: 'inline-block',\n        position: 'fixed',\n        borderRadius: '.2em',\n        top: '-100px',\n        fontFamily: 'inherit',\n        transition: 'all 0.4s ease-out'\n      },\n      styles\n    )\n  )\n\n  targetElem.insertBefore(elem, targetElem.firstChild)\n\n  let topOffset = offset\n\n  document.querySelectorAll(`.${selector}`).forEach(elem => {\n    const height = elem.clientHeight\n    css(elem, {\n      [vert]: topOffset + 'px'\n    })\n    topOffset += height + offset\n  })\n\n  setTimeout(function () {\n    const width = elem.offsetWidth\n    css(elem, {\n      [hor]: '-' + width + 'px',\n      opacity: 0\n    })\n    setTimeout(() => {\n      elem.remove()\n      cb()\n    }, 1000)\n  }, duration)\n\n  return elem\n}\n\nexport default toast\n"],"names":["css","elem","rules","Object","keys","forEach","key","style","content","opts","duration","cb","html","tmp","document","implementation","createHTMLDocument","body","innerHTML","textContent","innerText","stripHTML","split","length","getDurationBasedOnWords","targetElem","querySelector","target","createElement","setAttribute","role","type","classList","add","selector","className","assign","hor","opacity","padding","zIndex","color","background","display","position","borderRadius","top","fontFamily","transition","styles","insertBefore","firstChild","topOffset","offset","querySelectorAll","height","clientHeight","vert","setTimeout","offsetWidth","remove"],"mappings":"AAGA,SAASA,EAAIC,EAAMC,kBAAQ,IACzBC,OAAOC,KAAKF,GAAOG,iBAAQC,GACzBL,EAAKM,MAAMD,GAAOJ,EAAMI,oBAgB5B,SACEE,EACAC,wBADU,mBACH,UAYa,iBAATA,EAAoB,CAAEC,SAAUD,GAAyB,mBAATA,EAAsB,CAAEE,GAAIF,GAAQA,+BATjF,oCAVhB,SAAiCD,UAfd,IASnB,SAAmBI,kBAAO,QACnBC,EAAMC,SAASC,eAAeC,mBAAmB,OAAOC,YAC5DJ,EAAIK,UAAYN,EACTC,EAAIM,aAAeN,EAAIO,WAAa,GAI9BC,CAAUb,GAASc,MAAM,KAC1BC,OAlBU,IA2BVC,CAAwBhB,kCAC1B,sCACA,kCACA,oCACE,2CACJ,qCACA,wDAIW,CAAC,MAAO,uBACtBiB,EAAaX,SAASY,cAAcC,GACpC1B,EAAOa,SAASc,cAAc,OAEpC3B,EAAK4B,aAAa,OAAQC,GAC1B7B,EAAK4B,aAAa,YAAaE,GAC/B9B,EAAK4B,aAAa,cAAe,QAEjC5B,EAAK+B,UAAUC,IAAIC,GACnBC,GAAalC,EAAK+B,UAAUC,IAAIE,GAChClC,EAAKiB,UAAYV,EAEjBR,EACEC,EACAE,OAAOiC,WACL,IACGC,GAAM,SACPC,QAAS,IACTC,QAAS,cACTC,OAAQ,OACRC,MAAO,SACPC,WAAY,qBACZC,QAAS,iBACTC,SAAU,UACVC,aAAc,SACdC,IAAK,WACLC,WAAY,YACZC,WAAY,uBAEdC,IAIJxB,EAAWyB,aAAajD,EAAMwB,EAAW0B,gBAErCC,EAAYC,SAEhBvC,SAASwC,qBAAqBpB,GAAY7B,iBAAQJ,SAC1CsD,EAAStD,EAAKuD,aACpBxD,EAAIC,MAAM,IACPwD,GAAOL,EAAY,SAEtBA,GAAaG,EAASF,IAGxBK,WAAW,iBAET1D,EAAIC,MAAM,IACPoC,GAAM,IAFKpC,EAAK0D,YAEI,OACrBrB,QAAS,MAEXoB,sBACEzD,EAAK2D,SACLjD,KACC,MACFD,GAEIT"}